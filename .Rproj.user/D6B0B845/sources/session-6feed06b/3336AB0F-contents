---
title: "lab06"
author: "Your name here"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Lab 06 - Probability

## Part 1: transition probabilities

Land of Nod is very strange place, mostly because of the weather. You see, in the Land of Nod there are never two sunny days in a row. If it rains today, there is a 50% chance it will rain tomorrow. Likewise for snow. Right now, it is raining, so the probability of it snowing tomorrow is 25%. If it is snowing now, the probability that it is sunny tomorrow is 25%. But if it is sunny now, the probability of it being snowing or raining tomorrow is 50%!

1a. Create the 1-step transition probability matrix for the weather in the Land of Nod, in terms of the 3 states, 'rain', 'sunny', and 'snow'. Give the matrix column and row names.

1b. Given that it is raining today, using a markov chain model, what is the probability of it snowing in exactly 3 days?

1c. Given that it is sunny today, show that the long-range forecast for sun, snow or rain. About how many days does it take for the long range forecast to be the same with any starting condition?

## Part 2: binomial theory

The State of California has spent $45 million over 15 years to control water hyacinth (Eichhornia crassipes) in the Sacramento-San Joaquin Delta.

You are sampling for aquatic plants in the Sacramento-San Joaquin Delta. Previous studies have suggested that during this time of year, 2% of your samples will be water hyacinth. You realize that you can use the binomial theorem to figure out the probability of sampling m plants in n trials.

2a. You have just sampled 100 plants. Write a function or an expression that calculates the probability of your sample containing exactly 3 water hyacinth plants.

2b. Calculate the probability of your sample containing 5 *or fewer* water hyacinth plants?

2c. You intend to sample 100 water hyacinth plants today. Your over sample rate (of all plants) is 500 plants per hour. If you start at 9am, use a loop to determine what time will you likely (95% chance) have collected *at least* 100 water hyacinths and be able to go home? Store the output of this loop and plot the result as a line graph (time vs probability).


## Part 3: Binomial theory, with monte carlo 

Now we're going to solve the same questions as in Part 2, but using a monte carlo approach.

The State of California has spent $45 million over 15 years to control water hyacinth (Eichhornia crassipes) in the Sacramento-San Joaquin Delta.

You are sampling for aquatic plants in the Sacramento-San Joaquin Delta. Previous studies have suggested that during this time of year, 2% of your samples will be water hyacinth. You realize that you can simulate results following the binomial theorem to figure out the probability of sampling m plants in n trials.
 
3a. use `rbinom()` with the appropriate parameters to simulate the collection of 100 plants. In this single random simulation, did you sample exactly 3 plants?

3b. Repeat this random simulation 10,000 times, storing the answer to the question, "did you sample exactly 3 water hyacinth plants? (yes or no)" each time. Use the output of this (10,000 yes/no answers), to estimate the probability of a real sample containing exactly 3 water hyacinths. 

3c. Design and conduct a monte carlo experiment to calculate the probability of your sample containing 5 *or fewer* water hyacinth plants?

3d. Finally, use a monte carlo experiment to answer the same question as in 2c (how long will it take you to get 100 water hyacinths). To do this, you'll simulate collecting 500 plants an hour, 10000 times, and find the 95th percentile of your time results, to get to a 95 percent confidence level. The `quantile()` function is useful for this. Also report your median (50th percentile expectation), for how long it will take. 


